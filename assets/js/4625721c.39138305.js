"use strict";(self.webpackChunksmart_grow_capiro=self.webpackChunksmart_grow_capiro||[]).push([[5424],{1474:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var a=r(5893),o=r(1151);const i={id:"validate-token-js",title:"validateToken.js"},t="Archivo validateToken.js",s={id:"APIDocs/Archivos/middlewares/validate-token-js",title:"validateToken.js",description:"El archivo validateToken.js en la carpeta middlewares contiene un middleware para validar tokens de acceso utilizando la biblioteca jsonwebtoken.",source:"@site/docs/APIDocs/Archivos/middlewares/validateToken.md",sourceDirName:"APIDocs/Archivos/middlewares",slug:"/APIDocs/Archivos/middlewares/validate-token-js",permalink:"/docs/APIDocs/Archivos/middlewares/validate-token-js",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"validate-token-js",title:"validateToken.js"},sidebar:"tutorialSidebar",previous:{title:"jwt.js",permalink:"/docs/APIDocs/Archivos/libs/jwt-js"},next:{title:"alert.model.js",permalink:"/docs/APIDocs/Archivos/models/alert-model-js"}},c={},d=[{value:"Contenido del Archivo",id:"contenido-del-archivo",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.h1,{id:"archivo-validatetokenjs",children:["Archivo ",(0,a.jsx)(n.code,{children:"validateToken.js"})]}),"\n",(0,a.jsxs)(n.p,{children:["El archivo ",(0,a.jsx)(n.code,{children:"validateToken.js"})," en la carpeta ",(0,a.jsx)(n.code,{children:"middlewares"})," contiene un middleware para validar tokens de acceso utilizando la biblioteca ",(0,a.jsx)(n.code,{children:"jsonwebtoken"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"contenido-del-archivo",children:"Contenido del Archivo"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-jsx",children:"// Importar la biblioteca 'jsonwebtoken'\r\nimport jwt from 'jsonwebtoken';\r\n\r\n// Middleware para validar tokens de acceso\r\nexport const validateToken = (req, res, next) => {\r\n    // Obtener el token de la cabecera de autorizaci\xf3n\r\n    const token = req.headers.authorization;\r\n\r\n    // Verificar la existencia del token en la cabecera\r\n    if (!token) {\r\n        return res.json({\r\n            status: false,\r\n            message: \"Error en la cabecera 'authorization'\"\r\n        });\r\n    }\r\n\r\n    // Verificar la validez del token\r\n    jwt.verify(token, process.env.KEY_SECRET_TOKEN, (error, data) => {\r\n        // En caso de error en la verificaci\xf3n del token\r\n        if (error) {\r\n            return res.json({\r\n                status: false,\r\n                message: \"Autenticaci\xf3n denegada\"\r\n            });\r\n        }\r\n\r\n        // Agregar los datos del usuario al objeto 'req'\r\n        req.user = data;\r\n    });\r\n\r\n    // Continuar con la ejecuci\xf3n del siguiente middleware o ruta\r\n    next();\r\n};\n"})}),"\n",(0,a.jsx)(n.h2,{id:"descripci\xf3n",children:"Descripci\xf3n"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsxs)(n.strong,{children:["Middleware ",(0,a.jsx)(n.code,{children:"validateToken"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Este middleware verifica la existencia y validez del token de acceso en la cabecera de autorizaci\xf3n (",(0,a.jsx)(n.code,{children:"req.headers.authorization"}),"). Si el token no est\xe1 presente o es inv\xe1lido, se responde con un mensaje de error. Si el token es v\xe1lido, se agrega la informaci\xf3n del usuario al objeto ",(0,a.jsx)(n.code,{children:"req"})," y se permite continuar con el siguiente middleware o ruta."]}),"\n"]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>s,a:()=>t});var a=r(7294);const o={},i=a.createContext(o);function t(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);