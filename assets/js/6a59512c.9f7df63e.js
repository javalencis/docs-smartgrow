"use strict";(self.webpackChunksmart_grow_capiro=self.webpackChunksmart_grow_capiro||[]).push([[9059],{8927:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>a,toc:()=>c});var t=r(5893),s=r(1151);const l={id:"alerts-component-jsx",title:"Alerts.jsx"},o="Componente Alerts.jsx",a={id:"SmartGrow/Proyecto/components/alerts-component-jsx",title:"Alerts.jsx",description:"El componente Alerts.jsx se encarga de mostrar una lista de alertas en tiempo real o hist\xf3rico, permitiendo a los usuarios ver y gestionar las alertas. Tambi\xe9n proporciona la capacidad de visualizar detalles espec\xedficos de una alerta a trav\xe9s de un modal.",source:"@site/docs/SmartGrow/Proyecto/components/Alerts.md",sourceDirName:"SmartGrow/Proyecto/components",slug:"/SmartGrow/Proyecto/components/alerts-component-jsx",permalink:"/docs/SmartGrow/Proyecto/components/alerts-component-jsx",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"alerts-component-jsx",title:"Alerts.jsx"},sidebar:"tutorialSidebar",previous:{title:"AlertRow.jsx",permalink:"/docs/SmartGrow/Proyecto/components/alert-row-component-jsx"},next:{title:"AlertsHistory.jsx",permalink:"/docs/SmartGrow/Proyecto/components/alerts-history-component-jsx"}},i={},c=[{value:"Contenido del Archivo",id:"contenido-del-archivo",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n",level:2},{value:"Vista del Componente",id:"vista-del-componente",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h1,{id:"componente-alertsjsx",children:["Componente ",(0,t.jsx)(n.code,{children:"Alerts.jsx"})]}),"\n",(0,t.jsxs)(n.p,{children:["El componente ",(0,t.jsx)(n.code,{children:"Alerts.jsx"})," se encarga de mostrar una lista de alertas en tiempo real o hist\xf3rico, permitiendo a los usuarios ver y gestionar las alertas. Tambi\xe9n proporciona la capacidad de visualizar detalles espec\xedficos de una alerta a trav\xe9s de un modal."]}),"\n",(0,t.jsx)(n.h2,{id:"contenido-del-archivo",children:"Contenido del Archivo"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",children:'import React, { useEffect, useState } from "react";\r\nimport { useAppContext } from "../contexts/AppContext";\r\nimport { LayoutModal } from \'../containers/LayoutModal\';\r\nimport { ModalAlert } from \'./ModalAlert\';\r\nimport \'../styles/Alerts.scss\';\r\nimport { Alert } from "./Alert";\r\nimport { AlertsHistory } from "./AlertsHistory";\r\n\r\nexport const Alerts = ({ view, type }) => {\r\n    const { user } = useAppContext();\r\n    const [modalAlert, setModalAlert] = useState(false);\r\n    const [alertClick, setAlertClick] = useState({});\r\n    const [alerts, setAlerts] = useState([]);\r\n    const [btnSelected, setBtnSelected] = useState(\'tr\');\r\n\r\n    useEffect(() => {\r\n        // Configurar EventSource para recibir alertas en tiempo real\r\n        const eventSource = new EventSource(\'http://localhost:3001/api/alerts\');\r\n        eventSource.onmessage = (event) => {\r\n            const data = JSON.parse(event.data);\r\n            setAlerts(data.reverse());\r\n        };\r\n\r\n        // Cerrar la conexi\xf3n cuando el componente se desmonta\r\n        return () => {\r\n            eventSource.close();\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <section className="Alerts">\r\n            <div className="AlertsButtons">\r\n                <button onClick={() => setBtnSelected(\'tr\')}>\r\n                    Tiempo Real\r\n                </button>\r\n                {\r\n                    view === "alerts" && (\r\n                        user.role === "admin" && (\r\n                            <button onClick={() => setBtnSelected(\'hi\')}>\r\n                                Hist\xf3rico\r\n                            </button>\r\n                        )\r\n                    )\r\n                }\r\n            </div>\r\n            {\r\n                btnSelected === \'tr\' ?\r\n                    <div className="AlertsList">\r\n                        {\r\n                            alerts.map((alert) => (\r\n                                <Alert\r\n                                    key={alert._id}\r\n                                    data={alert}\r\n                                    setModalAlert={setModalAlert}\r\n                                    setAlertClick={setAlertClick}\r\n                                    type={type}\r\n                                />\r\n                            ))\r\n                        }\r\n                    </div> :\r\n                    <AlertsHistory alerts={alerts} />\r\n            }\r\n\r\n            {\r\n                modalAlert && (\r\n                    <LayoutModal setModalAlert={setModalAlert}>\r\n                        <ModalAlert alert={alertClick} setModalAlert={setModalAlert} />\r\n                    </LayoutModal>\r\n                )\r\n            }\r\n\r\n        </section>\r\n    );\r\n};\n'})}),"\n",(0,t.jsx)(n.h2,{id:"descripci\xf3n",children:"Descripci\xf3n"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Propiedades (",(0,t.jsx)(n.code,{children:"view"}),", ",(0,t.jsx)(n.code,{children:"type"}),"):"]})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"view"}),': Indica si se debe mostrar en tiempo real ("tr") o hist\xf3rico ("hi").']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"type"}),": Tipo de alerta (opcional)."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Estado Local (",(0,t.jsx)(n.code,{children:"modalAlert"}),", ",(0,t.jsx)(n.code,{children:"alertClick"}),", ",(0,t.jsx)(n.code,{children:"alerts"}),", ",(0,t.jsx)(n.code,{children:"btnSelected"}),"):"]})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"modalAlert"}),": Estado para controlar la visibilidad del modal de alerta."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"alertClick"}),": Estado para almacenar la alerta seleccionada."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"alerts"}),": Estado que contiene la lista de alertas."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"btnSelected"}),": Estado que indica qu\xe9 bot\xf3n de vista est\xe1 seleccionado."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["(",(0,t.jsx)(n.code,{children:"useEffect"}),"):"]})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Se utiliza useEffect para configurar un ",(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/EventSource",children:"EventSource"})," y recibir alertas en tiempo real desde la API. La conexi\xf3n se cierra cuando el componente se desmonta."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Renderizado Condicional:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Muestra botones para cambiar entre las vistas de tiempo real e hist\xf3rico."}),"\n",(0,t.jsx)(n.li,{children:"Muestra la lista de alertas en tiempo real o hist\xf3rico seg\xfan la selecci\xf3n del bot\xf3n."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Modal de Alerta (",(0,t.jsx)(n.code,{children:"LayoutModal"})," y ",(0,t.jsx)(n.code,{children:"ModalAlert"}),"):"]})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Muestra un modal con detalles espec\xedficos cuando se hace clic en una alerta."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"vista-del-componente",children:"Vista del Componente"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Tiempo Real:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.img,{alt:"imagen de alerta",src:r(4686).Z+"",width:"491",height:"423"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Historico:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.img,{alt:"imagen de alerta",src:r(7040).Z+"",width:"919",height:"350"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Este componente es esencial para la gesti\xf3n de alertas y proporciona una interfaz de usuario interactiva para los usuarios administradores."})]})}function p(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},4686:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/alerts1-4dc638769cc5329849b03a8e52f5ff26.png"},7040:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/images/alerts2-40696d9a563784c87bfa5bf0dd93566e.png"},1151:(e,n,r)=>{r.d(n,{Z:()=>a,a:()=>o});var t=r(7294);const s={},l=t.createContext(s);function o(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);