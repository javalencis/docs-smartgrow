"use strict";(self.webpackChunksmart_grow_capiro=self.webpackChunksmart_grow_capiro||[]).push([[9585],{7839:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>l});var i=r(5893),o=r(1151);const a={id:"login-jsx",title:"Login.jsx"},s="Archivo Login.jsx",t={id:"SmartGrow/Proyecto/pages/public/login-jsx",title:"Login.jsx",description:"El archivo Login.jsx es un componente de React que representa la p\xe1gina de inicio de sesi\xf3n de la aplicaci\xf3n. Este componente utiliza react-hook-form para gestionar el formulario de inicio de sesi\xf3n, se comunica con la API mediante axios, y utiliza el contexto de la aplicaci\xf3n para gestionar el estado de autenticaci\xf3n.",source:"@site/docs/SmartGrow/Proyecto/pages/public/Login.md",sourceDirName:"SmartGrow/Proyecto/pages/public",slug:"/SmartGrow/Proyecto/pages/public/login-jsx",permalink:"/docs/SmartGrow/Proyecto/pages/public/login-jsx",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"login-jsx",title:"Login.jsx"},sidebar:"tutorialSidebar",previous:{title:"User.jsx",permalink:"/docs/SmartGrow/Proyecto/pages/private/user-jsx"},next:{title:"API-Docs",permalink:"/docs/category/api-docs"}},c={},l=[{value:"Contenido del Archivo",id:"contenido-del-archivo",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n",level:2},{value:"Vista del Componente",id:"vista-del-componente",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"archivo-loginjsx",children:["Archivo ",(0,i.jsx)(n.code,{children:"Login.jsx"})]}),"\n",(0,i.jsxs)(n.p,{children:["El archivo ",(0,i.jsx)(n.code,{children:"Login.jsx"})," es un componente de React que representa la p\xe1gina de inicio de sesi\xf3n de la aplicaci\xf3n. Este componente utiliza ",(0,i.jsx)(n.code,{children:"react-hook-form"})," para gestionar el formulario de inicio de sesi\xf3n, se comunica con la API mediante ",(0,i.jsx)(n.code,{children:"axios"}),", y utiliza el contexto de la aplicaci\xf3n para gestionar el estado de autenticaci\xf3n."]}),"\n",(0,i.jsx)(n.h2,{id:"contenido-del-archivo",children:"Contenido del Archivo"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"import { useForm } from 'react-hook-form';\r\nimport imgLogin from '../../assets/imgs/imgLogin.jpg';\r\nimport imgLogo from '../../assets/imgs/logo.png';\r\nimport '../../styles/Login.scss';\r\nimport api from '../../api/api';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useContext, useState } from 'react';\r\nimport { AppContext } from '../../contexts/AppContext';\r\n\r\n/**\r\n * Componente que representa la p\xe1gina de inicio de sesi\xf3n.\r\n */\r\nexport const Login = () => {\r\n    // Estado para gestionar el estado de error durante el inicio de sesi\xf3n.\r\n    const [error, setError] = useState(false);\r\n\r\n    // Hook useForm para gestionar el formulario de inicio de sesi\xf3n.\r\n    const { register, handleSubmit } = useForm();\r\n\r\n    // Contexto de la aplicaci\xf3n para gestionar el estado global.\r\n    const { setIsLogin, setUser } = useContext(AppContext);\r\n\r\n    // Hook de react-router para navegar entre las rutas de la aplicaci\xf3n.\r\n    const navigate = useNavigate();\r\n\r\n    /**\r\n     * Funci\xf3n que maneja el env\xedo del formulario de inicio de sesi\xf3n.\r\n     */\r\n    const onSubmitFormLogin = async (data) => {\r\n        try {\r\n            // Env\xeda una solicitud POST a la API para autenticar al usuario.\r\n            const res = await api.post('/users/login', data);\r\n\r\n            if (res.data.status) {\r\n                // Si la autenticaci\xf3n es exitosa, actualiza el estado global.\r\n                sessionStorage.setItem('token', res.data.token);\r\n                setUser(res.data.user);\r\n                setIsLogin(true);\r\n\r\n                // Redirige a rutas espec\xedficas seg\xfan el rol del usuario.\r\n                if (res.data.user.role === 'admin') {\r\n                    navigate('/admin/estado-guirnaldas');\r\n                } else {\r\n                    navigate('/app/estado-guirnaldas');\r\n                }\r\n            } else {\r\n                // Muestra un mensaje de error si la autenticaci\xf3n falla.\r\n                throw new Error('Usuario o contrase\xf1a incorrecto');\r\n            }\r\n        } catch (error) {\r\n            setError(true); // Establece el estado de error en true en caso de error.\r\n        }\r\n    };\r\n\r\n    return (\r\n        <section className=\"Login\">\r\n            <div className=\"LoginContainer\">\r\n                <div className='Login-img'>\r\n                    <img src={imgLogin} alt=\"\" />\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit(onSubmitFormLogin)}>\r\n                    <img src={imgLogo} alt=\"\" />\r\n\r\n                    {error && (\r\n                        <p className='LoginError'>Usuario o contrase\xf1a incorrectas</p>\r\n                    )}\r\n\r\n                    {/* Entrada para el nombre de usuario */}\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Usuario\"\r\n                        {...register('username')}\r\n                        required\r\n                    />\r\n                    \r\n                    {/* Entrada para la contrase\xf1a */}\r\n                    <input\r\n                        type=\"password\"\r\n                        placeholder=\"Contrase\xf1a\"\r\n                        {...register('password')}\r\n                        required\r\n                    />\r\n\r\n                    {/* Bot\xf3n de env\xedo del formulario */}\r\n                    <button type='submit'>\r\n                        Ingresar\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </section>\r\n    );\r\n};\n"})}),"\n",(0,i.jsx)(n.h2,{id:"descripci\xf3n",children:"Descripci\xf3n"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"react-hook-form"}),":"]})," Importaci\xf3n de la biblioteca para manejar formularios de manera eficiente en React."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Im\xe1genes y Estilos:"})," Importaci\xf3n de im\xe1genes y estilos espec\xedficos para la p\xe1gina de inicio de sesi\xf3n."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"API y Contexto de Aplicaci\xf3n:"})," Uso de ",(0,i.jsx)(n.code,{children:"axios"})," para realizar solicitudes a la API y del contexto de la aplicaci\xf3n para gestionar el estado de autenticaci\xf3n."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Formulario de Inicio de Sesi\xf3n:"})," Implementaci\xf3n de un formulario que captura el nombre de usuario y la contrase\xf1a del usuario."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Manejo de Errores:"})," Mostrado de un mensaje de error en caso de que ocurra un error durante el inicio de sesi\xf3n."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Redirecci\xf3n seg\xfan el Rol:"})," Redirecci\xf3n a diferentes rutas dependiendo del rol del usuario autenticado."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Este componente es esencial para la autenticaci\xf3n y proporciona una interfaz  para que los usuarios inicien sesi\xf3n en la aplicaci\xf3n."}),"\n",(0,i.jsx)(n.h2,{id:"vista-del-componente",children:"Vista del Componente"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"imagen de login",src:r(9512).Z+"",width:"1350",height:"648"})}),"\n",(0,i.jsx)(n.p,{children:"Este componente es esencial para la autenticaci\xf3n y proporciona una interfaz  para que los usuarios inicien sesi\xf3n en la aplicaci\xf3n."})]})}function p(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},9512:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/login-297644a563821465245a621e89dc70db.png"},1151:(e,n,r)=>{r.d(n,{Z:()=>t,a:()=>s});var i=r(7294);const o={},a=i.createContext(o);function s(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);