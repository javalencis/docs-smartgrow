"use strict";(self.webpackChunksmart_grow_capiro=self.webpackChunksmart_grow_capiro||[]).push([[6881],{4466:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>x,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var o=r(5893),s=r(1151);const i={id:"app-context-jsx",title:"AppContext.jsx"},t="Archivo AppContext.jsx",a={id:"SmartGrow/Proyecto/contexts/app-context-jsx",title:"AppContext.jsx",description:"El archivo AppContext.jsx define el contexto global de la aplicaci\xf3n utilizando React Context API. Este contexto proporciona informaci\xf3n sobre el usuario, el estado de inicio de sesi\xf3n y otras variables compartidas en la aplicaci\xf3n.",source:"@site/docs/SmartGrow/Proyecto/contexts/AppContext.md",sourceDirName:"SmartGrow/Proyecto/contexts",slug:"/SmartGrow/Proyecto/contexts/app-context-jsx",permalink:"/docs/SmartGrow/Proyecto/contexts/app-context-jsx",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"app-context-jsx",title:"AppContext.jsx"},sidebar:"tutorialSidebar",previous:{title:"LayoutPublic.jsx",permalink:"/docs/SmartGrow/Proyecto/containers/layout-public-jsx"},next:{title:"functions.js",permalink:"/docs/SmartGrow/Proyecto/libs/functions-js"}},c={},l=[{value:"Contenido del Archivo",id:"contenido-del-archivo",level:2},{value:"Descripci\xf3n",id:"descripci\xf3n",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.h1,{id:"archivo-appcontextjsx",children:["Archivo ",(0,o.jsx)(n.code,{children:"AppContext.jsx"})]}),"\n",(0,o.jsxs)(n.p,{children:["El archivo ",(0,o.jsx)(n.code,{children:"AppContext.jsx"})," define el contexto global de la aplicaci\xf3n utilizando ",(0,o.jsx)(n.a,{href:"https://react.dev/reference/react/createContext",children:"React Context API"}),". Este contexto proporciona informaci\xf3n sobre el usuario, el estado de inicio de sesi\xf3n y otras variables compartidas en la aplicaci\xf3n."]}),"\n",(0,o.jsx)(n.h2,{id:"contenido-del-archivo",children:"Contenido del Archivo"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"import { createContext, useContext, useEffect, useState } from \"react\";\r\nimport api from \"../api/api\";\r\n\r\n// Crear el contexto de la aplicaci\xf3n\r\nexport const AppContext = createContext();\r\n\r\n// Proveedor de contexto que envuelve la aplicaci\xf3n\r\nexport const AppProvider = ({ children }) => {\r\n    // Estados del contexto\r\n    const [user, setUser] = useState({});\r\n    const [isLogin, setIsLogin] = useState(false);\r\n    const [openMenu, setOpenMenu] = useState(false);\r\n\r\n    // Efecto secundario para validar el usuario al cargar la aplicaci\xf3n\r\n    useEffect(() => {\r\n        validateUser();\r\n    }, []);\r\n\r\n    // Funci\xf3n para validar el usuario mediante la API\r\n    const validateUser = async () => {\r\n        const token = sessionStorage.getItem('token');\r\n\r\n        if (!token) {\r\n            return false;\r\n        }\r\n\r\n        try {\r\n            const res = await api.get('/users/profile', {\r\n                headers: {\r\n                    Authorization: token\r\n                }\r\n            });\r\n\r\n            if (res.data.status) {\r\n                setUser(res.data.user);\r\n                setIsLogin(true);\r\n            }\r\n        } catch (error) {\r\n            // Manejar el error, por ejemplo, limpiar el token y el estado de inicio de sesi\xf3n\r\n            console.error(\"Error al validar el usuario:\", error);\r\n            sessionStorage.removeItem('token');\r\n            setUser({});\r\n            setIsLogin(false);\r\n        }\r\n    };\r\n\r\n    // Proporcionar el contexto a los componentes hijos\r\n    return (\r\n        <AppContext.Provider\r\n            value={{\r\n                user,\r\n                setUser,\r\n                isLogin,\r\n                setIsLogin,\r\n                openMenu,\r\n                setOpenMenu\r\n            }}\r\n        >\r\n            {children}\r\n        </AppContext.Provider>\r\n    );\r\n};\r\n\r\n// Hook personalizado para acceder al contexto\r\nexport const useAppContext = () => (useContext(AppContext));\n"})}),"\n",(0,o.jsx)(n.h2,{id:"descripci\xf3n",children:"Descripci\xf3n"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Contexto Creado:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"AppContext"}),": Contexto de la aplicaci\xf3n que almacena informaci\xf3n compartida."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["Proveedor de Contexto (",(0,o.jsx)(n.code,{children:"AppProvider"}),"):"]})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Proveedor de contexto que envuelve la aplicaci\xf3n y proporciona los valores del contexto a los componentes hijos."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Estados del Contexto:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"user"}),": Estado que almacena la informaci\xf3n del usuario."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"isLogin"}),": Estado que indica si el usuario est\xe1 autenticado."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"openMenu"}),": Estado que controla la visibilidad del men\xfa."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["Efecto Secundario (",(0,o.jsx)(n.code,{children:"useEffect"}),"):"]})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Al cargar la aplicaci\xf3n, se valida el usuario utilizando la funci\xf3n ",(0,o.jsx)(n.code,{children:"validateUser"}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["Funci\xf3n ",(0,o.jsx)(n.code,{children:"validateUser"}),":"]})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Verifica la existencia de un token de sesi\xf3n."}),"\n",(0,o.jsx)(n.li,{children:"Realiza una solicitud a la API para validar el usuario."}),"\n",(0,o.jsxs)(n.li,{children:["Actualiza los estados ",(0,o.jsx)(n.code,{children:"user"})," e ",(0,o.jsx)(n.code,{children:"isLogin"})," seg\xfan la respuesta de la API."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Proporcionar el Contexto:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["El componente ",(0,o.jsx)(n.code,{children:"AppProvider"})," proporciona el contexto y sus valores a los componentes hijos."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["Hook Personalizado (",(0,o.jsx)(n.code,{children:"useAppContext"}),"):"]})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"useAppContext"}),": Hook personalizado para acceder al contexto desde cualquier componente hijo."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["Tipo de Petici\xf3n (",(0,o.jsx)(n.code,{children:"api.get"}),"):"]})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["La funci\xf3n ",(0,o.jsx)(n.code,{children:"validateUser"})," realiza una petici\xf3n GET a la ruta ",(0,o.jsx)(n.code,{children:"/users/profile"})," de la API utilizando el token de autorizaci\xf3n en los encabezados."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["Tipo de Autorizaci\xf3n (",(0,o.jsx)(n.code,{children:"Bearer Token"}),"):"]})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Se utiliza el esquema de autorizaci\xf3n Bearer, donde el token de sesi\xf3n se env\xeda en los encabezados de la solicitud. Esto asegura que la solicitud est\xe9 autenticada correctamente."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Este contexto global permite compartir informaci\xf3n clave de la aplicaci\xf3n entre diferentes componentes, y la validaci\xf3n del usuario implica una solicitud a la API utilizando el m\xe9todo GET y un token de autorizaci\xf3n."})]})}function x(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>a,a:()=>t});var o=r(7294);const s={},i=o.createContext(s);function t(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);